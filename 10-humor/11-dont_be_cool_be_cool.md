---
marp: true
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会#-->

# かっこつけてないでカッコつけろよ

_詠み人知らず_

<!-- 少しコーディングに慣れてくると、短くしたり凝った式を書いたりしがち。それで失敗するので、優先順位の意図をきちんと明確化しようという話 -->
---

```cpp
// C++のコード
if (a > 0)
    return -1;
// (正の場合の処理が続く...)
```

↓ 「aが負値であることを出力しておいて」「はーい」

```cpp
if (a > 0)
    printf("a is invalid.\n"); // 不正であることを出力
    return -1;
// (正の場合の処理が続く...)
```

---

## そもそもこうしておけば良かった

```cpp
if (a > 0) {
    return -1;
}
// (正の場合の処理が続く...)
```

---

## クイズ１

下のC++の条件式において、1〜3のうちどの評価順序が正しいか

```cpp
if (a < b || c < d && e < f) { ... }
```

### 選択肢
```cpp
// 1. (a<b)、あるいは(c<dかつe<f)を満たす
if ((a < b) || ((c < d) && (e < f))) { ... }

// 2. (a<bまたはc<d)、かつ(e<f)を満たす
if (((a < b) || (c < d)) && (e < f)) { ... }

// 3. その他
```
<!-- 正解は1 -->

---

## クイズ２

以下の式の計算結果xを求めよ。なお式中の`i << j`は「iをjビットシフトする(iを2のj乗する)」を意味する。つまり`2 << 3`は8、`1 << 8`だと256, `2 << 8`だと512となる

```py
higher = 2;
lower = 3;
x = higher << 8 + lower
```

### 選択肢
```
1. x = 515  (== (higher << 8) + lower)
2. x = 4096 (== higher << (8 + lower))
```

<!-- 正解は2 -->

---

## かっこつけてないでカッコつけろよ

* 演算子の順序をまじめに覚えるのは大変
* カッコをきちんと書いて、意図を残そう