---
marp: true
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会# ― エンジニアとしての解像度を高めるための勉強会-->

# YAGNI
_You ain't gonna need it（どうせ使われないよ？）_

---

## YAGNI（ヤグニ）

> 「今の段階では不要だけれど、あとで必要になるかもしれない」「もしやの場合に」と思って書いたコードや機能が使われることは、**たいてい無い**

エクストリームプログラミングから生じた原則
* エクストリームプログラミングの原則：プログラマーが必要と判断するまでは機能を追加すべきではない
---

## なぜか

* よかれと思って追加した機能が使われる確率はわずか10%$^1$
    * 残りの90%が無駄になってしまう

>>> 1:http://www.extremeprogramming.org/rules/early.html
<!--  よかれと思って実装した機能が実際に使われるのは10%程度。費やした時間の90%は無駄に終わる -->

---

## 違反しているコード例

- <b>使われていないコード</b>
    - 参照されていない変数
    - 呼び出されない関数
    - コメントアウトされたコード
- <b>過度に拡張されたコード</b>
    - 定数しか渡さない関数
    - 呼び出す関数が１つだけのグローバル/publicな関数
    - 子クラスが１つだけの抽象クラス

---

## むしろ新たな機能の実装が難しくなる

```cpp
struct Coordinate {
    int x, y;
};
```
↓ 単位がピクセルだけでなくポイントでも指定できるようにしよう！
↓ きっと役立つはず!!
```cpp
struct Coordinate {
    int x, y;
    UnitType unitType; // enum class UnitType {Pixel, Point}
}
```
↓ （そしてポイント単位が使われることのないまま１年後）

---

## Welcome to conversion hell

1. 「座標計算なので足し算、引き算を実装してほしい」
2. （ピクセルとポイントを維持したままの変換、どうしよう…）
3. （ポイントを消したいけれどリリースしたAPIだし変更できないし…）
4. （必要なときまで実装しなければよかった…）

```cpp
// Pointを導入しなかったときの幸せな世界
struct Coordinate {
    int x, y;
    Coordinate plus(Coordinate that) {
        return Coordinate(x + that.x, y + that.y);
    }
}
```

---

## YAGNI ≠ 「その場しのぎで動くものを作る」

* 必要になったときにコードを柔軟に変更できるようにしておく
    * 開放閉鎖の原則(S**O**LID)を活用する
* ファーム開発の場合は変更する機会を与えてくれないかもしれない

<!-- 人工衛星やロケットのプログラムなんかもそう -->

---

## 参考

* 杞憂
* [アイスキュロス](https://ja.wikipedia.org/wiki/アイスキュロス)

<!-- 中国の古典「列子（れっし）」に由来する。杞の国に天が落ち、地が崩れると心配して食事も睡眠も取れなくなった人がいた。見かねた人が説得し、安心させたという説話が語源だ。「杞人憂天（きじんゆうてん）」という成語もある杞人は太陽や月、星が落ちてくることも心配していた (毎日新聞より)-->

<!-- 紀元前455年:に古代アテナのアイスキュロス（悲劇をテーマにした劇を多く残した詩人）も、神託として「落下物によって死ぬ」という言葉を受けて、その予言が実現することを恐れて屋外で過ごしていたとされる。
しかし、彼の禿げた頭をリクガメの甲羅を砕くのに適した岩と勘違いしたワシによって、リクガメを頭部に落とされて死んだ。 -->