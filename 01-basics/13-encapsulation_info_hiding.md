---
marp: true
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会#-->

# カプセル化と情報隠蔽

_Encapsulation and Information Hiding_

---

## カプセル化: データとロジックとでグルーピング

* データと、それに関連するロジックとをまとめる
    * → クラスやモジュールという膜で包む
* カプセル化 ∈ オブジェクト指向設計
    * カプセル化 = オブジェクト指向設計 ではない
    * **カプセル化 = 情報隠蔽 でもない**

<!-- カプセルの中にカプセルがあっても良い。むしろそういうもの -->

---

```py
age = 18
sex = Sex.NotApplicable
height = 167.3
  :
bmi = calculate_bmi(age, sex, height)
```
↓
```py
def User:
    def __init__(self, age, sex, height):
        self.age = age
        self.sex = sex
        self.height = height
    def calculate_bmi(self) -> int:
        ...
```

---

## ドメイン駆動設計における「コンテキストの境界付け」

> ソフトウェアで解決したい部分(専門領域)を、ソフトウェアの設計にそのまま反映させる、もっと簡単にいうと**業務をちゃんと理解した上でソフトウェア開発を行う**といった意味合い

>>> [【設計手法】ドメイン駆動設計(DDD) is 何? 【初心者にも分かりやすく】](https://qiita.com/kim_t0814/items/1a50bbdd8ef3ec780185)

* 問題対象の専門家(ドメインエキスパート)と一緒になって進める
* 現場と使うのと同じ用語で話/プログラミングをすること(ユビキタス言語)
* コンテキストを境界付けすること **←コレ!**

---

## 情報隠蔽: 必要のないものは見せない

* カプセル化によってグループ化されたもののうち、外には必要のないものを見せないようにする

* 関係性をシンプルにできる
* 使う側も悩まなくて済む

---

## カプセル化と隠蔽化の違い

### カプセル化

### 情報隠蔽

---

## カプセル化と隠蔽化によるメリット

* 関連のない要素が混じらないため、コードが見やすくなる
* 変更時の影響がクラスやモジュール内に閉じることになる
* 影響度が明確になるので、コードの変更が容易になる
* それぞれが独立した部品になるので、再利用性が高まる
* 小さい単位に分割されるので、複雑な問題にも柔軟に適応できる

>>> 『プリンシプルオブプログラミング - ３年目までに身につけたい一生役立つ101の原理原則』より
<!--  -->

---

## パルナスの規則

* モジュールの使用者には、サービスを利用するために必要なすべての情報を提供する必要がありつつも、他の情報を提供していてはならない
* モジュールの実装者には、機能実現に必要なすべての情報を提供する必要がありつつも、他の情報は提供していてはならない

>>> デイビッド・ロージ・パーナス/パルナス（David Lorge Parnas、1941年2月10日 -）

<!-- オブジェクト指向の基礎となったモジュール設計の概念を生み出したソフトウェア工学の先駆者。オブジェクト指向設計がない時代から、結合度を下げ凝集度を上げる設計こそが良いと説いていた -->