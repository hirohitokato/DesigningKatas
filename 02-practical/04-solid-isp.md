---
marp: true
math: mathjax
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会# ― エンジニアとしての解像度を高めるための勉強会-->

<!-- インターフェース分離の原則によって何が説明できると思いますか？（質問）
そうです。人間のエゴ、あるいは悲しい性(サガ)ですね。 -->

# SOLID #4 インターフェース分離の原則
_Interface Segregation Principle_

> ### クライアントに、 クライアントが利用しないメソッドへの依存を強制してはならない
 
<!-- あるインターフェースを用意するときに、仮想メソッドに複数の役割を詰め込まない。 -->

---

## インターフェース分離の原則

異なる責務のインターフェースを安易に混ぜてはいけない

* 単一責任の原則のインターフェース版

---

## 確認: インターフェースとは


>>> Wikipediaだと『インタフェース』

---

## 何が問題か？

インターフェース型も太る

* 肥満インターフェース
* 神インターフェース

<!-- 原則に違反した場合の問題は、神インターフェース型が存在してしまうということ。 -->
<!-- 洗濯機を操作していてエラーが出た時に、その原因を調べるために何百ページもあるマニュアル(目次や索引なし)を渡されたら読みこなせる？普通の操作方法から、開発の内部資料までのっているようなものを見せられて喜ぶ人がいる？ -->

---

![](../02-practical/assets/04-isp-swiftint.png)

>>> swiftdoc.orgよりSwift 3.1時代のInt型

<!-- インターフェースをどれだけ分離したらいいかという１つの例。Swift3.1時代で、整数型はこのように表現されていた。様々な特性が集まって、整数であることが表現されていた -->

---

## ISPはどう使う？
 
* **設計時**：クラス設計で単一責任の原則を守り、複数の機能を詰め込まない
* **違反の臭い**：(提供側)関係ないメソッドまで実装することを強いられている / (使用側)どのメソッドを使えばいいのか分からない
* **リファクタリング**：インターフェースの粒度を役割ごとに分ける
 
---
<!-- 三枚舌外交
第一次世界大戦を有利に戦うため行い、中東の火種をつくったイギリスの秘密外交

https://solver-story.com/?p=1776

1. 第一次世界大戦でイギリスはオスマン帝国(トルコ)と敵対
    * 三国同盟{イギリス/フランス/ロシア} vs. 三国協商{ドイツ/オーストリア/イタリア+オスマン帝国}
2. イギリスはアラブ人(トルコ国内で反乱を促す)、ユダヤ人(資金援助)の協力を得ようとした
3. それぞれに秘密外交で矛盾した約束
    * アラブ人に… 旧トルコ領にアラブ人独立国家の建設を約束(1915年「フセイン＝マクマホン協定」)
    * ユダヤ人に… パレスチナにユダヤ人国家の建設を認める(1917年「バルフォア宣言」)
    * フランス・ロシアに… 旧トルコ領は我々だけで分割しよう(1916年「サイクス・ピコ協定」)
    * （アラブ/ユダヤに国を作ると言っておきながら最終的には自分たちのものにしようとしていた）
4. 大戦後、旧トルコ領の一部を英仏が委任統治
    * 両国の利害のみで中等を分割
    * そのまま各国が独立したため民族や宗教の対立が残った
* 第２次大戦後、英国からパレスチナ問題を丸投げされた国連はパレスチナ分割を決議
    * 米国の意向で、少数派のユダヤ人に約６割、アラブ人に約４割を割り当て、宗教対立の火種となる聖地エルサレムは国際管理とした
    * 決議に基づいて建国したイスラエルと、認めないアラブの間で中東戦争が発生
        * 勝利したイスラエルはエルサレム西側を領有し、後に東側も実効支配
        * 土地を追われた多くのパレスチナ人は難民となり、紛争は今もなお -->