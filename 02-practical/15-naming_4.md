---
marp: true
math: mathjax
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会# ― エンジニアとしての解像度を高めるための勉強会-->

# 読みやすいコードの作り方 - 命名(4)

_Code Readability_

---

## タネ本

### 『読みやすいコードのガイドライン<br>　 持続可能なソフトウェア開発のために』

- 石川宗寿(著)
- 技術評論社 2022/11/4初版

> 見た目を美しく整えることや、流行りのテクニックを取り入れることが「改善」だと思い込んでいませんか？

![bg right:30% 90%](assets/12-book.jpg)

---

## 命名

1. 命名に使う文法
2. 名前の示す内容
3. **単語の選択**

---

## 注意深く単語を選ぶ

- 曖昧性の少ない単語を選ぶ
- **紛らわしい略語を避ける**
- 単位や実体を示す語句を追加する
- 肯定的な単語を用いる

---

## 紛らわしい略語を避ける

大きなルールは２つ

1. 一般知識・プロダクト用語・言語・使用プラットフォーム以外の省略語は原則使わない
    - `im`＝`illegalMessage`?`inputMethod`?`instanceManager`??
2. デファクトスタンダードな省略語は、狭いスコープでのみ使ってよいかもしれない
    - 文字列を`str`, ミリ秒を`millis`(Javaのみ)

<!-- Javaの標準APIに ClockInMillis, System#currentTimeInMillis などがあるのでデファクトとしての標準的な省略語。
でも他の言語では聞かないので使わないほうがよい。InMilliSeconds、InMsなど言語の例を見るとよい。
また言語として標準の単位があるのでそれに従うべき（JSだとミリ秒、Pythonだと秒） -->

---

## 単位や実体を示す語句を追加する - 1

時間、長さ、通貨、2次元配列のループにおける列と行などを区別できるようにする。

- `timeout` → `timeoutInMillis`/`timeoutInSeconds` $^{※1}$
- `pixels`,`points`,`inches`
- `i, j` → `row, col`

ドメイン駆動開発の値オブジェクトのように、単位を型で表す方法も考慮できる。

```cpp
class Inch { int value; }
class Centimeter { int value; }
void setWidth(Inch width) { ... } // SetWidth(Centimeter(10))はコンパイルエラー
```

>>> 1: 単位の前に`In`をつけると英文法として自然。ただし言語環境やフレームワークによっては省略されることもある

---

## 単位や実体を示す語句を追加する - 2

単位だけでなく別種の値を同じ情報(型)として示す場合も同様

**例**: 背景色の指定にARGB,HSLを使う、または色を定義したリソースのIDを使う

- backgroundArgbColor
- backgroundHslColor
- backgroundColorId

※ ただしこの場合も名前が正しい文法に沿っているかに注意する

---

## 肯定的な単語を用いる

`isEnabled` > `isDisabled`。`!isDisabled`と書いたときに二重否定になって迷う。

```cpp
if (!window.isNotDisabled) { // 🤔 (5分後)…isEnabledでいいんじゃない？
    ...
}
```

一応例外もあるが(↓)、使わないにこしたことはない。

- ほとんどの状況で否定演算子と共に使う場合
- disabledな状態が特殊な意味を持つとき

---

## 「郷に入っては郷に従え」も大事

- プロジェクトのコーディングガイドラインが第一
- 異なるネーミングルールの混在は混乱の元にしかならない
    - 名前だけでなく技術も同様。
- 悪法もまた法なり$^1$

許せない場合は(少しずつ)変えていくチャンスと捉えよう<br>(ボーイスカウトルール)

>>> 俗にソクラテス(古代ギリシャの哲学者)が死刑判決を下された時に言ったといわれている。

---

## まとめ

- 文法
    - 名詞句: もっとも重要な単語を名前の最後に置く
    - 命令形: 動詞の原形を名前の最初に置く
- 名前の示す内容
    - 表現すべきもの: 対象が何であるか・何をするか
    - 表現すべきでないもの: いつ・誰が・どのように使うか
- 単語の選択
    - 曖昧性が少ない単語を選ぶ
    - 紛らわしい省略語を避ける
    - なるべく肯定的な単語を用いる
    - 型や単位を付記する

<!--
言語の本質は心理的な相互作用。音声でも文字でもない
これはエドワード・サピアというアメリカの人類学者・言語学者が言っていることの解釈。
言語学は話し言葉にあるとしつつも、心理学も重要だと説いている

- 言語って話し言葉から生まれている。そりゃそうだ。
- 話し言葉や音声もあくまで口という本来食べるための器官に音を出させているもの
    - 人間/生物って音声器官を持っていない。ピアノを弾く指が演奏器官と言わないのと同じ(レトリックに偏っているが)
- 文字や書き言葉は話し言語を書き下したもの
- つまり言語とは、文字や音を相互に交換することによる、お互いあるいは集団の心理的な相互作用

順番を心理面から並べて言うと、言語とは心理ではあるが、それを口という器官に目的外のことをさせて音に変換・記号化して、それを耳で聞いたものを文字や書き言葉に記号化している。書き言葉って二次創作物。
そしてそれを私たちはプログラムコードの中で使っている。

この状況において、曖昧適当な命名をしてしまうと、心理という一番伝えたいものの記号の記号（二次創作）を
めちゃくちゃにしてしまうので、命名ってすごく大事。
 -->