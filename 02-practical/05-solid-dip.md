---
marp: true
math: mathjax
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会# ― エンジニアとしての解像度を高めるための勉強会-->

# SOLID #5 依存関係逆転の法則
_Dependency Inversion Principle_

> ### 上位のモジュールは下位のモジュールに依存してはならない。どちらのモジュールも「抽象」に依存すべきである
> or
> ### 「抽象」は実装の詳細に依存してはならない。実装の詳細が「抽象」に依存すべきである

<!-- オブジェクト指向らしさを決定的に示すことのできる象徴的な原則です。 -->

---

## 前提: 安定しているソフトウェアアーキテクチャ

* 階層構造を持つ
    * 役割が分担されている
* 安定している層と変化しやすい層とが分かれている
* 各階層は、単一方向の依存関係を持つ
    * 使う側と使われる側の役割を明確に分ける(双方向に依存しない)
    * 変化しやすい層は安定層のことを知っている。逆(安定層→変化層)は知らない

TODO: アーキテクチャの絵と、片方向の矢印が✕になっている絵

<!-- 階層構造の例： UI/ビジネスロジック/データベース、MVC、共通部/機種依存部 -->


<!-- お互いに知っていると、循環参照の輪に入ってしまい容易に差し替えができなくなる -->

---

## 問題

上位→下位はOK。けれど下位→上位方向へデータ/イベントを伝えるにはどうしたらいい？

* デバイスドライバからのイベント通知、アプリ状態の変化をUIに表示、など。

TODO: 図。矢印に？がついている図

<!-- グローバル変数を用意する？惜しい。 -->