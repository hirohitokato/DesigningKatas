---
marp: true
math: mathjax
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会# ― エンジニアとしての解像度を高めるための勉強会-->

# 読みやすいコードの作り方 - 命名(2)

_Code Readability_

---

## タネ本

### 『読みやすいコードのガイドライン<br>　 持続可能なソフトウェア開発のために』
- 石川宗寿(著)
- 技術評論社 2022/11/4初版

> 見た目を美しく整えることや、流行りのテクニックを取り入れることが「改善」だと思い込んでいませんか？

![bg right:30% 90%](assets/12-book.jpg)

---

## 命名

1. 命名に使う文法
2. **名前の示す内容**
3. 単語の選択

---

## 名前の示す内容

- 命名の対象が「何であるか・何をするか」を表現すること
- 「いつ・どこで・どのように使われるか」を言及しないこと

**対象の責任範囲と、対象を使っているコードが何をしているか**を明確にする

---

## 適切/不適切の例

適切な名前：何であるか・何をするかを表している

> `MessageListProvider`： メッセージのリストを提供するクラス
> `userId`： ユーザーの識別子
> `showErrorDialog`： エラーダイアログを表示する関数

不適切な名前：いつ・どこで・どのように使われるかを表している

> `onMessageReceived`： メッセージを受け取ったときに呼ばれる関数
> `isCalledFromEditScreen`： 編集画面から呼ばれたときに真になる値
> `idForNetworkQuery`： クエリーに使用される識別子<br>（ユーザーの識別子かもしれないし、クエリーの識別子かもしれない）

---

## 例1: 引数の名前

> 関数`showUserList`を定義する。ただしリスト取得に失敗した際
> - 起動直後の画面から呼び出した場合だとエラーダイアログを表示
> - それ以外だと何もしない

↓

```cpp
// ✕ 「誰に呼ばれたか」を示す仮引数
void showUserList(bool isCalledFromLandingScreen) { … }
```

---

## 例1: 引数の名前

> 関数`showUserList`を定義する。ただしリスト取得に失敗した際
> - 起動直後の画面から呼び出した場合だとエラーダイアログを表示
> - それ以外だと何もしない

｜　
｜ 「どういう時に何をするか」に注目して仮引数を命名する <!-- 失敗時にダイアログを表示する、が正しい。起動直後の画面から呼び出した場合に、ではない -->
↓

```cpp
// ◯「何をするか」を示す仮引数
void showUserList(bool shouldShowDialogOnError) { … }

// ✕ 「誰に呼ばれたか」を示す仮引数
void showUserList(bool isCalledFromLandingScreen) { … }
```

<!-- ◯とはいえ、引数で処理を変えるというのは、複数の制御が結合している制御結合になっているかもしれないことに注意。 -->

---

## 例2: 関数の名前

> メッセージを受け取ったときに動く、受信したメッセージ内容を画面に表示する関数に名前を付ける

↓

```cpp
// ✕ 「いつ呼ばれるか」を示す関数名
void onReceivedMessage(MessageModel model) { … }
```

---

## 例2: 関数の名前

> メッセージを受け取ったときに動く、受信したメッセージ内容を画面に表示する関数に名前を付ける

｜　
｜ 「何をするか」に注目して命名する <!-- 失敗時にダイアログを表示する、が正しい。起動直後の画面から呼び出した場合に、ではない -->
↓

```cpp
// ◯「何をするか」を示す関数名
void showReceivedMessage(MessageModel model) { … }

// ✕ 「いつ呼ばれるか」を示す関数名
void onReceivedMessage(MessageModel model) { … }
```
>>> ※ただし抽象メソッドとして機能提供する場合などは`onReceived～`も可。サブクラスでどう使われるか定義時点では分からないため。`

<!-- 一方でonReceivedMessageでも分かりやすいという気持ちも分かる。何のための処理かが分かるから。
でも、他の関数は「何をする」という意味で命名しているのにこちらは「いつ呼ばれる」と、方向性が異なっていることには留意してほしい。
 -->

<!-- もっと考えると、showReceivedMessageもなぜ呼ばれたかが意味に乗っているので
さらに「Received」を外してshowMessage(...)で良いかもしれない。ただしそこまで考えると今度は
汎用的になりすぎて使い方が分からないという話にもなるし、あるいはこの手のイベント受信で動くメソッドは
privateで定義されることが多いので、今のshowReceivedMessageで十分かもしれない。
ここでベストを決めるには情報が足りないので出来ないが、皆さんの環境ではこうした追加のコンテキストも含めて考えてほしい
 -->


---

## もちろん例外もある

宣言時点で「何をするか」が決まっていないもの

```cs
void sendHtmlRequest(HtmlRequest request, Result onFinished) { ... }
```



---

## 今回のまとめ

- 命名の対象が「何であるか・何をするか」を表現すること
- 「いつ・どこで・どのように使われるか」を言及しないこと

**対象の責任範囲と、対象を使っているコードが何をしているか**を明確にする
