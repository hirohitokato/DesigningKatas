---
marp: true
theme: katas
---
<!-- 
size: 16:9
paginate: true
-->
<!-- header: 勉強会#-->

# SOLID #1 単一責任の原則(SRP)
_Single Responsibility Principle_

---

## その前にSOLID

オブジェクト指向のクラス設計・任意のモジュール設計において **超**重要な原則

* SOLIDを理解していると
    * スパゲティコードがなくなり読みやすくなる
    * 機能拡張に素早く柔軟に対応できる
    * 長期間にわたってメンテナンスしやすくなる

### → SOLID(堅牢)なソフトウェアを作るバクロニム

---

## ソフトウェアアーキテクチャとは？

* 複数の階層をなしたもの
    * ↓
* システムの全体的な形状と構造を定義するもの
    * ↓
* モジュールやコンポーネント・クラスの構造とその相互接続

>>> Robert C. Martin氏(通称:ボブおじさん)による論文「Design Principles and Design Patterns」より

 <!-- 逆にアーキテクチャとは何のためにあるか。メンテナンスのためにある。
 １回で作れて以降の変更も要らないものにアーキテクチャは不要。
 時間がかかり、人が絡み、変化していくものにはしっかりしたアーキテクチャが必要
 （つまり書き捨てのスクリプト以外には必要と考えて良い） -->
---

## SOLID

コードの臭いに気づき消臭する５つの原則

* S: 単一責任の原則: Sindle Responsibility Principle
* O: 開放閉鎖の原則: Open/Closed Principle
* L: リスコフの置換原則: Liskov Substitution Principle
* I: インターフェイス分離の原則: Interface Segregation Principle
* D: 依存関係逆転の原則: Dependency Inversion Principle

---

## SRP: 単一責任の原則

<!-- よくある間違い。関数では１つのことだけを行うべきという意味で捉えられることが多く、それもそれで原則として存在しているが、
もう少し抽象化してほしい。ボブおじさんも名前付けがよくなかったと後悔している。 -->

<!-- 元々はこんな意味だった -->

> ### モジュールを変更する理由はたったひとつだけであるべき

<!-- ここでのモジュールとは、ソースコードのあつまりだけでなく、画像などのリソース、データベースや通信プロトコルなどをまとめた凝集性のあるもの -->

<!-- システムに手を加えるきっかけは、ユーザー/顧客の要求を満たすため。
顧客こそが「変更する理由」であり、これを言い換えると… -->

↓ 言い換えると

> ### モジュールは単一の顧客に対して責務を負うべきである

<!-- 単一の顧客といっても、〇〇さんという特定の個人を指すのではなく、同じような要求を持った人を抽象化したものになる、ここではそれを「アクター」と言い換えて、つまり -->

↓ つまり

> ### モジュールは単一のアクターに対して責任を負うべき
> * 複数のアクターがいるコードは別々にすべき
> * アクターの異なるコードをまとめてはいけない

<!-- このように、SRPはモジュール・クラス・関数をどのような凝集度でまとめるかを表した原則 -->

---

## 似ているからといって安易な共通化をしない

同じような処理だからとまとめる
安直なリファクタリングあるある
---

## 単一責任の原則は要求分析の時点から始まっている

* この『生徒』はどんなときにも同じ概念か
* 『ドライバー』という単語はOSのドライバーとは意味が違う…？

アクターやドメインが異なれば別のクラスやモジュールとして表現すべき
